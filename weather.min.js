$(document).ready(function(){function a(){var a=$(".local-weather"),b=$(".info-weather"),c=a.data("state"),d=a.data("city"),e="6d21846ad7649b70",f="http://api.wunderground.com/api/"+e+"/conditions/q/"+c+"/"+d+".json";$.ajax({url:f,dataType:"jsonp",success:function(c){var d=c.current_observation.display_location.full,e=c.current_observation.temp_f,f=c.current_observation.weather,h=(c.current_observation.icon,c.current_observation.feelslike_f),i=c.current_observation.wind_gust_mph,j=c.current_observation.relative_humidity,k=c.current_observation.dewpoint_f,l=c.current_observation.pressure_mb;a.find(".location").html(d),a.find(".temp").html(Math.round(e)),a.find(".desc").html(f),a.find(".icon").addClass(g[f]),b.find(".feels").html(Math.round(h)),b.find(".wind").html(Math.round(i)),b.find(".humidity").html(j),b.find(".dew-point").html(k),b.find(".pressure").html(l)}})}function b(){var a=$("li");$(".search__input").on("keyup",function(b){b.preventDefault();var c,d=b.which,f=a.filter(".selected");if(40==d||38==d||13==d)if(a.removeClass("selected"),40==d)c=!f.length||f.is(":last-child")?a.eq(0):f.next(),c.addClass("selected");else if(38==d)c=!f.length||f.is(":first-child")?a.last():f.prev(),c.addClass("selected");else if(13==d){var g=f.children("a").data("url");f.empty(),console.log("city selected on Enter Key",g),e(g),$(".search__input").blur()}})}function c(){$(".search__results").empty();var a=$(".search__input").val(),c=($(".search__results"),"http://autocomplete.wunderground.com/aq?query="+a+"&h=0"),d=c+"&cb=?";$.getJSON(d,function(a){$("#json-results").html(JSON.stringify(a,null,1));var c=JSON.stringify(a,null,1);c=JSON.parse(c);for(var d=0;d<c.RESULTS.length;d++){var e=c.RESULTS[d].name,f=c.RESULTS[d].l;$(".search__results").append('<li value= "'+d+'" > <a href="#" class="filter-city" data-url="'+f+'">'+e+"</a></li>"),$(".search__results").removeClass("hide-results").addClass("show-results")}$(".search__results li").hover(function(){$(".search__results li").removeClass("selected"),$(this).addClass("selected")}),b()})}function d(a){$(".search__input:text").val("")}function e(a){$(".search").removeClass("visible");var b=$(".local-weather"),c=$(".info-weather"),e="6d21846ad7649b70",f="http://api.wunderground.com/api/"+e+"/conditions/q/"+a+".json";$.ajax({url:f,dataType:"jsonp",success:function(a){var d=a.current_observation.temp_f,e=a.current_observation.weather,f=a.current_observation.display_location.full,h=a.current_observation.feelslike_f,i=a.current_observation.wind_gust_mph,j=a.current_observation.relative_humidity,k=a.current_observation.dewpoint_f,l=a.current_observation.pressure_mb;b.find(".location").html(f),b.find(".temp").html(Math.round(d)),b.find(".desc").html(e),b.find(".icon").addClass(g[e]),c.find(".feels").html(Math.round(h)),c.find(".wind").html(Math.round(i)),c.find(".humidity").html(j),c.find(".dew-point").html(k),c.find(".pressure").html(l)}}),$(".search__results").empty(),$("header").removeClass("hidden"),d(location)}var f=0;$(".search__results").on("click","a",function(a){a.preventDefault();var b=$(this).data("url");e(b)}),$(".search__form").submit(function(a){a.preventDefault()}),$(".search__input").on("keypress",function(a){var b=$(this).val();f++,f>=2&&c(),""==b&&($(".search__results").empty(),f=0)}),$(".find").on("click",function(a){a.preventDefault(),$(".search").addClass("visible"),$("header").addClass("hidden")}),$(".cancel").on("click",function(a){a.preventDefault(),$(".search").removeClass("visible"),$("header").removeClass("hidden"),$(".search__results").empty(),$(".search__input").val("")}),a();var g={Drizzle:"icon-rain","Light Drizzle":"icon-rain","Heavey Drizzle":"icon-rain",Rain:"icon-rain","Light Rain":"icon-rain","Heavy Rain":"icon-rain",Snow:"icon-snow","Light Snow":"icon-snow","Heavy Snow":"icon-snow","Light Snow Grains":"icon-snow","Heavy Snow Grains":"icon-snow","Snow Grains":"icon-snow","Light Ice Crystals":"icon-hail","Heavey Ice Crystals":"icon-hail","Ice Crystals":"icon-hail","Light Ice Pellets":"icon-hail","Heavey Ice Pellets":"icon-hail",Pellets:"icon-hail",Mist:"icon-clouds","Light Mist":"icon-clouds","Heavy Mist":"icon-clouds",Fog:"icon-clouds","Light Fog":"icon-clouds","Heavy Fog":"icon-clouds","Fog Patches":"icon-clouds","Light Fog Patches":"icon-clouds","Heavy Fog Patches":"icon-clouds",Smoke:"icon-clouds","Light Smoke":"icon-clouds","Heavy Smoke":"icon-clouds","Volcanic Ash":"icon-clouds","Light Volcanic Ash":"icon-clouds","Heavy Volcanic Ash":"icon-clouds","Wide Spread Dust":"icon-clouds","Light Wide Spread Dust":"icon-clouds","Heavy Wide Spread Dust":"icon-clouds",Sand:"icon-clouds","Light Sand":"icon-clouds","Heavy Sand":"icon-clouds",Haze:"icon-clouds","Light Haze":"icon-clouds","Heavy Haze":"icon-clouds",Spray:"icon-clouds","Light Spray":"icon-clouds","Heavy Spray":"icon-clouds","Dust Whirls":"icon-clouds","Light Dust Whirls":"icon-clouds","Heavy Dust Whirls":"icon-clouds","Sand Storm":"icon-clouds","Light Sand Storm":"icon-clouds","Heavy Sand Storm":"icon-clouds","Low Drifting Snow":"icon-snow","Light Low Drifting Snow":"icon-snow","Heavy Low Drifting Snow":"icon-snow","Low Drifting Widespread Dust":"icon-clouds","Light Low Drifting Widespread Dust":"icon-clouds","Heavy Low Drifting Widespread Dust":"icon-clouds","Low Drifting Sand":"icon-clouds","Light Low Drifting Sand":"icon-clouds","Heavy Low Drifting Sand":"icon-clouds","Blowing Snow":"icon-snow-alt","Light Blowing Snow":"icon-snow-alt","Heavy Blowing Snow":"icon-snow-alt","Blowing Widespread Dust":"icon-clouds","Light Blowing Widespread Dust":"icon-clouds","Heavy Blowing Widespread Dust":"icon-clouds","Blowing Sand":"icon-clouds","Light Blowing Sand":"icon-clouds","Heavy Blowing Sand":"icon-clouds","Rain Mist":"icon-rain","Light Rain Mist":"icon-rain","Heavy Rain Mist":"icon-rain","Rain Showers":"icon-rain","Light Rain Showers":"icon-rain","Heavy Rain Showers":"icon-rain","Snow Showers":"icon-snow","Light Snow Showers":"icon-snow","Heavy Snow Showers":"icon-snow","Snow Blowing Snow Mist":"icon-snow","Light Snow Blowing Snow Mist":"icon-snow","Heavy Snow Blowing Snow Mist":"icon-snow","Ice Pellets Showers":"icon-hail","Light Ice Pellets Showers":"icon-hail","Heavy Ice Pellets Showers":"icon-hail","Ice Pellets Showers":"icon-rain","Light Ice Pellets Showers":"icon-rain","Heavy Ice Pellets Showers":"icon-rain","Hail Showers":"icon-rain","Light Hail Showers":"icon-rain","Heavy Hail Showers":"icon-rain","Small Hail Showers":"icon-rain","Light Small Hail Showers":"icon-rain","Heavy Small Hail Showers":"icon-rain",Thunderstorm:"icon-clouds-flash","Light Thunderstorm":"icon-clouds-flash","Heavy Thunderstorm":"icon-clouds-flash","Thunderstorm and Rain":"icon-clouds-flash","Light Thunderstorm and Rain":"icon-clouds-flash","Heavy Thunderstorm and Rain":"icon-clouds-flash","Thunderstorm and Snow":"icon-clouds-flash","Light Thunderstorm and Snow":"icon-clouds-flash","Heavy Thunderstorm and Snow":"icon-clouds-flash","Thunderstorm and Ice Pellets":"icon-clouds-flash","Light Thunderstorm and Ice Pellets":"icon-clouds-flash","Heavy Thunderstorm and Ice Pellets":"icon-clouds-flash","Thunderstorm and Hail":"icon-clouds-flash","Light Thunderstorm and Hail":"icon-clouds-flash","Heavy Thunderstorm and Hail":"icon-clouds-flash","Freezing Drizzle":"icon-rain","Light Freezing Drizzle":"icon-rain","Heavy Freezing Drizzle":"icon-rain","Freezing Rain":"icon-rain","Light Freezing Rain":"icon-rain","Heavy Freezing Rain":"icon-rain","Freezing Fog":"icon-clouds","Light Freezing Fog":"icon-clouds","Heavy Freezing Fog":"icon-clouds","Patches of Fog":"icon-clouds","Shallow Fog":"icon-clouds","Partial Fog":"icon-cloud-sun",Overcast:"icon-sun","Scattered Clouds":"icon-cloud-sun","Small Hail":"icon-hail","Partly Cloudy":"icon-cloud-sun",Cloudy:"icon-clouds","Chance of Flurries":"icon-snow-alt","Chance of Rain":"icon-rain","Freezing Rain":"icon-hail",Sleet:"icon-hail",Sunny:"icon-sun",Thunderstorms:"icon-clouds-flash-alt",Thunderstorm:"icon-clouds-flash",Unkown:"icon-help-circled-alt","Scattered Clouds":"icon-cloud-sun",Clear:"icon-sun","Mostly Cloudy":"icon-clouds"}});